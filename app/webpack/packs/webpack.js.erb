import Rails from 'rails-ujs';
window.Rails = Rails;
Rails.start();

import Turbolinks from 'turbolinks';
Turbolinks.start();

import 'turbolinks-animate';
document.addEventListener( 'turbolinks:load', () => {
  TurbolinksAnimate.init({ element: document.querySelector('body.turbolinks-animate') });
})

import 'onsignal/dist/OneSignalSDK';
import OnSignal from 'onsignal';
document.addEventListener( 'DOMContentLoaded', () => {
  window.onSignal = new OnSignal( '<%= Rails.application.credentials.onesignal[:app_id] %>', {} );
  if (document.querySelector('body.devise.registrations.edit').length > 0) {
    let button = document.querySelector('#enableNotifications');
    if (onSignal.isSubscribed()) {
      button.classList.add('-disabled');
    }
    button.addEventListener( 'click', () => {
      onSignal.subscribe();
    });
  }
})

import './../javascripts/myg/index';


import './../stylesheets/index';
